================================================================================
            ĐIỀU CHỈNH LUỒNG MOVIE CONTROLLER TRONG HỆ THỐNG STREAMING
================================================================================

┌────────────────────────────────────────────────────────────────────────────┐
│                       SAI: MOVIE CONTROLLER QUA FALLBACK                  │
└────────────────────────────────────────────────────────────────────────────┘

  ┌────────────────┐         ┌────────────────┐         ┌────────────────┐
  │                │         │                │         │                │
  │Movie Controller│─────────►MongoDB Fallback│─────────►   MongoDB      │
  │                │         │                │         │                │
  └────────────────┘         └────────────────┘         └────────────────┘

  ❌ Sai vì: MongoDB Fallback chỉ dùng cho tìm kiếm khi Elasticsearch lỗi
  ❌ Sai vì: Movie Controller cần truy cập dữ liệu trực tiếp và nhanh chóng


┌────────────────────────────────────────────────────────────────────────────┐
│                   ĐÚNG: MOVIE CONTROLLER TRỰC TIẾP TỚI DB                 │
└────────────────────────────────────────────────────────────────────────────┘

  ┌────────────────┐                                  ┌────────────────┐
  │                │                                  │                │
  │Movie Controller│──────────────────────────────────►   MongoDB      │
  │                │         Truy cập trực tiếp       │                │
  └────────────────┘                                  └────────────────┘

  ✓ Đúng vì: Truy cập trực tiếp nhanh hơn, phù hợp với việc lấy chi tiết phim
  ✓ Đúng vì: MongoDB Fallback chỉ dành cho tìm kiếm, không liên quan đến hiển thị phim


┌────────────────────────────────────────────────────────────────────────────┐
│                       SO SÁNH HAI LUỒNG RIÊNG BIỆT                        │
└────────────────────────────────────────────────────────────────────────────┘

  LUỒNG TÌM KIẾM:                           LUỒNG XEM PHIM:
  ------------------                         ------------------
  
  Search Controller                          Movie Controller
         │                                         │
         ▼                                         │
  Elasticsearch Service                            │
         │                                         │
         ▼                                         │
  Elasticsearch Index                              │
         │                                         │
         │ (Nếu lỗi)                              │
         ▼                                         │
  MongoDB Fallback ────┐                           │
                       │                           │
                       ▼                           ▼
                  MongoDB Main                MongoDB Main
                     Database                   Database

  - Tìm kiếm sử dụng Elasticsearch           - Xem phim truy cập trực tiếp
    cho tốc độ tìm kiếm cao                    vào MongoDB để lấy chi tiết
  - Có fallback khi ES lỗi                    - Không cần fallback mechanism
  - Thiên về full-text search                 - Thiên về lấy chi tiết theo ID

================================================================================
                             LƯU Ý QUAN TRỌNG
================================================================================

1. Elasticsearch chỉ dùng cho tìm kiếm, không dùng cho hiển thị chi tiết

2. MongoDB Fallback chỉ hoạt động khi Elasticsearch gặp lỗi, đây là cơ chế
   dự phòng cho tìm kiếm, không liên quan đến hiển thị chi tiết phim

3. Movie Controller truy vấn trực tiếp MongoDB (Main Database) để tối ưu
   tốc độ và hiệu suất khi lấy chi tiết phim

4. Sơ đồ đã được điều chỉnh để phản ánh đúng mối quan hệ này

5. Đây là thiết kế phổ biến trong các hệ thống có tìm kiếm nâng cao:
   - Elasticsearch để tìm kiếm (với MongoDB là fallback)
   - MongoDB để lưu trữ và truy xuất chi tiết

================================================================================
